C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE EEPROM
OBJECT MODULE PLACED IN .\DP8051_Keil_951\Release\EEPROM.obj
COMPILER INVOKED BY: C:\Program Files (x86)\Cypress\PSoC Creator\4.0\PSoC Creator\import\keil\pk51\9.51\C51\BIN\c51.exe 
                    -Generated_Source\PSoC3\EEPROM.c NOIV LARGE MODDP2 OMF2 VB(1) NOIP INCDIR(.,Generated_Source\PSoC3) FF(3) DB DF(NDEBUG) W
                    -L(2) PR(.\DP8051_Keil_951\Release/EEPROM.lst) CD OT(8,SPEED) OJ(.\DP8051_Keil_951\Release\EEPROM.obj)

line level    source

*** MESSAGE C286 IN LINE 0 OF (null): license limits optimization to level 5
   1          /*******************************************************************************
   2          * File Name: EEPROM.c
   3          * Version 3.0
   4          *
   5          *  Description:
   6          *   Provides the source code to the API for the EEPROM component.
   7          *
   8          ********************************************************************************
   9          * Copyright 2008-2015, Cypress Semiconductor Corporation.  All rights reserved.
  10          * You may use this file only in accordance with the license, terms, conditions,
  11          * disclaimers, and limitations in the end user license agreement accompanying
  12          * the software package with which this file was provided.
  13          *******************************************************************************/
  14          
  15          #include "EEPROM.h"
  16          
  17          
  18          /*******************************************************************************
  19          * Function Name: EEPROM_Enable
  20          ********************************************************************************
  21          *
  22          * Summary:
  23          *  Enable the EEPROM block. Also reads the temperature and stores it for
  24          *  future writes.
  25          *
  26          * Parameters:
  27          *  None
  28          *
  29          * Return:
  30          *  None
  31          *
  32          *******************************************************************************/
  33          void EEPROM_Enable(void) 
  34          {
  35   1          /* Read temperature value */
  36   1          (void)CySetTemp();
  37   1      
  38   1          /* Start EEPROM block */
  39   1          CyEEPROM_Start();
  40   1      }
  41          
  42          
  43          /*******************************************************************************
  44          * Function Name: EEPROM_Start
  45          ********************************************************************************
  46          *
  47          * Summary:
  48          *  Starts EEPROM.
  49          *
  50          * Parameters:
  51          *  None
  52          *
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 2   

  53          * Return:
  54          *  None
  55          *
  56          *******************************************************************************/
  57          void EEPROM_Start(void) 
  58          {
  59   1          EEPROM_Enable();
  60   1      }
  61          
  62          
  63          /*******************************************************************************
  64          * Function Name: EEPROM_Stop
  65          ********************************************************************************
  66          *
  67          * Summary:
  68          *  Stops and powers down EEPROM.
  69          *
  70          * Parameters:
  71          *  None
  72          *
  73          * Return:
  74          *  None
  75          *
  76          *******************************************************************************/
  77          void EEPROM_Stop (void) 
  78          {
  79   1          /* Stop and power down EEPROM block */
  80   1          CyEEPROM_Stop();
  81   1      }
  82          
  83          
  84          /*******************************************************************************
  85          * Function Name: EEPROM_WriteByte
  86          ********************************************************************************
  87          *
  88          * Summary:
  89          *  Writes a byte of data to the EEPROM. This function blocks until
  90          *  the function is complete. For a reliable write procedure to occur you should
  91          *  call EEPROM_UpdateTemperature() function if the temperature of the
  92          *  silicon has been changed for more than 10C since the component was started.
  93          *
  94          * Parameters:
  95          *  dataByte:  The byte of data to write to the EEPROM
  96          *  address:   The address of data to be written. The maximum address is dependent
  97          *             on the EEPROM size.
  98          *
  99          * Return:
 100          *  CYRET_SUCCESS, if the operation was successful.
 101          *  CYRET_BAD_PARAM, if the parameter sectorNumber is out of range.
 102          *  CYRET_LOCKED, if the SPC is being used.
 103          *  CYRET_UNKNOWN, if there was an SPC error.
 104          *
 105          *******************************************************************************/
 106          cystatus EEPROM_WriteByte(uint8 dataByte, uint16 address) 
 107          {
 108   1          cystatus status;
 109   1          uint16 rowNumber;
 110   1          uint16 byteNumber;
 111   1          
 112   1          CySpcStart();
 113   1      
 114   1          if (address < CY_EEPROM_SIZE)
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 3   

 115   1          {
 116   2              rowNumber = address/(uint16)CY_EEPROM_SIZEOF_ROW;
 117   2              byteNumber = address - (rowNumber * ((uint16)CY_EEPROM_SIZEOF_ROW));
 118   2              if(CYRET_SUCCESS == CySpcLock())
 119   2              {
 120   3                  status = CySpcLoadMultiByte(CY_SPC_FIRST_EE_ARRAYID, byteNumber, &dataByte, \
 121   3                                                                          EEPROM_SPC_BYTE_WRITE_SIZE);
 122   3                  if (CYRET_STARTED == status)
 123   3                  {
 124   4                      /* Plan for failure */
 125   4                      status = CYRET_UNKNOWN;
 126   4      
 127   4                      while(CY_SPC_BUSY)
 128   4                      {
 129   5                          /* Wait until SPC becomes idle */
 130   5                      }
 131   4      
 132   4                      if(CY_SPC_STATUS_SUCCESS == CY_SPC_READ_STATUS)
 133   4                      {
 134   5                          status = CYRET_SUCCESS;
 135   5                      }
 136   4                      /* Command to erase and program the row. */
 137   4                      if(CYRET_SUCCESS == status)
 138   4                      {
 139   5                          if(CySpcWriteRow(CY_SPC_FIRST_EE_ARRAYID, (uint16)rowNumber, dieTemperature[0u],
 140   5                          dieTemperature[1u]) == CYRET_STARTED)
 141   5                          {
 142   6                              /* Plan for failure */
 143   6                              status = CYRET_UNKNOWN;
 144   6      
 145   6                              while(CY_SPC_BUSY)
 146   6                              {
 147   7                                  /* Wait until SPC becomes idle */
 148   7                              }
 149   6      
 150   6                              /* SPC is idle now */
 151   6                              if(CY_SPC_STATUS_SUCCESS == CY_SPC_READ_STATUS)
 152   6                              {
 153   7                                  status = CYRET_SUCCESS;
 154   7                              }
 155   6                          }
 156   5                          else
 157   5                          {
 158   6                              status = CYRET_UNKNOWN;
 159   6                          }
 160   5                      }
 161   4                      else
 162   4                      {
 163   5                          status = CYRET_UNKNOWN;
 164   5                      }
 165   4                  }
 166   3                  else
 167   3                  {
 168   4                      if (CYRET_BAD_PARAM != status)
 169   4                      {
 170   5                          status = CYRET_UNKNOWN;
 171   5                      }
 172   4                  }
 173   3                  CySpcUnlock();
 174   3              }
 175   2              else
 176   2              {
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 4   

 177   3                  status = CYRET_LOCKED;
 178   3              }
 179   2          }
 180   1          else
 181   1          {
 182   2              status = CYRET_BAD_PARAM;
 183   2          }
 184   1      
 185   1      
 186   1          return (status);
 187   1      }
 188          
 189          
 190          /*******************************************************************************
 191          * Function Name: EEPROM_ReadByte
 192          ********************************************************************************
 193          *
 194          * Summary:
 195          *  Reads and returns a byte of data from the on-chip EEPROM memory. Although
 196          *  the data is present in the CPU memory space, this function provides an
 197          *  intuitive user interface, addressing the EEPROM memory as a separate block with
 198          *  the first EERPOM byte address equal to 0x0000.
 199          *
 200          * Parameters:
 201          *  address:   The address of data to be read. The maximum address is limited by the
 202          *             size of the EEPROM array on a specific device.
 203          *
 204          * Return:
 205          *  Data located at an address.
 206          *
 207          *******************************************************************************/
 208          uint8 EEPROM_ReadByte(uint16 address) 
 209          {
 210   1          uint8 retByte;
 211   1          uint8 interruptState;
 212   1      
 213   1          interruptState = CyEnterCriticalSection();
 214   1      
 215   1          /* Request access to EEPROM for reading.
 216   1          This is needed to reserve PHUB for read operation from EEPROM */
 217   1          CyEEPROM_ReadReserve();
 218   1          
 219   1          retByte = *((reg8 *) (CYDEV_EE_BASE + address));
 220   1      
 221   1          /* Release EEPROM array */
 222   1          CyEEPROM_ReadRelease();
 223   1          
 224   1          CyExitCriticalSection(interruptState);
 225   1      
 226   1          return (retByte);
 227   1      }
 228          
 229          
 230          /*******************************************************************************
 231          * Function Name: EEPROM_UpdateTemperature
 232          ********************************************************************************
 233          *
 234          * Summary:
 235          *  Updates and stores the temperature value. This function should be called
 236          *  before EEPROM writes if the temperature may have been changed by more than
 237          *  10 degrees Celsius.
 238          *
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 5   

 239          * Parameters:
 240          *  None
 241          *
 242          * Return:
 243          *  Status of operation, 0 if operation complete, non-zero value if error
 244          *  was detected.
 245          *
 246          *******************************************************************************/
 247          uint8 EEPROM_UpdateTemperature(void) 
 248          {
 249   1          return ((uint8)CySetTemp());
 250   1      }
 251          
 252          
 253          /*******************************************************************************
 254          * Function Name: EEPROM_EraseSector
 255          ********************************************************************************
 256          *
 257          * Summary:
 258          *  Erase an EEPROM sector (64 rows). This function blocks until the erase
 259          *  operation is complete. Using this API helps to erase the EEPROM sector at
 260          *  a time. This is faster than using individual writes but affects a cycle
 261          *  recourse of the whole EEPROM row.
 262          *
 263          * Parameters:
 264          *  sectorNumber:  The sector number to erase.
 265          *
 266          * Return:
 267          *  CYRET_SUCCESS, if the operation was successful.
 268          *  CYRET_BAD_PARAM, if the parameter sectorNumber is out of range.
 269          *  CYRET_LOCKED, if the SPC is being used.
 270          *  CYRET_UNKNOWN, if there was an SPC error.
 271          *
 272          *******************************************************************************/
 273          cystatus EEPROM_EraseSector(uint8 sectorNumber) 
 274          {
 275   1          cystatus status;
 276   1          
 277   1          CySpcStart();
 278   1      
 279   1          if(sectorNumber < (uint8) EEPROM_SECTORS_NUMBER)
 280   1          {
 281   2              /* See if we can get SPC. */
 282   2              if(CySpcLock() == CYRET_SUCCESS)
 283   2              {
 284   3                  if(CySpcEraseSector(CY_SPC_FIRST_EE_ARRAYID, sectorNumber) == CYRET_STARTED)
 285   3                  {
 286   4                      /* Plan for failure */
 287   4                      status = CYRET_UNKNOWN;
 288   4      
 289   4                      while(CY_SPC_BUSY)
 290   4                      {
 291   5                          /* Wait until SPC becomes idle */
 292   5                      }
 293   4      
 294   4                      /* SPC is idle now */
 295   4                      if(CY_SPC_STATUS_SUCCESS == CY_SPC_READ_STATUS)
 296   4                      {
 297   5                          status = CYRET_SUCCESS;
 298   5                      }
 299   4                  }
 300   3                  else
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 6   

 301   3                  {
 302   4                      status = CYRET_UNKNOWN;
 303   4                  }
 304   3      
 305   3                  /* Unlock SPC so that someone else can use it. */
 306   3                  CySpcUnlock();
 307   3              }
 308   2              else
 309   2              {
 310   3                  status = CYRET_LOCKED;
 311   3              }
 312   2          }
 313   1          else
 314   1          {
 315   2              status = CYRET_BAD_PARAM;
 316   2          }
 317   1      
 318   1          return(status);
 319   1      }
 320          
 321          
 322          /*******************************************************************************
 323          * Function Name: EEPROM_Write
 324          ********************************************************************************
 325          *
 326          * Summary:
 327          *  Writes a row (16 bytes) of data to the EEPROM. This function blocks until
 328          *  the write operation is complete. Compared to functions that write one byte,
 329          *  this function allows writing a whole row (16 bytes) at a time. For
 330          *  a reliable write procedure to occur you should call the
 331          *  EEPROM_UpdateTemperature() function if the temperature of the
 332          *  silicon has changed for more than 10C since component was started.
 333          *
 334          * Parameters:
 335          *  rowData:    The address of the data to write to the EEPROM.
 336          *  rowNumber:  The row number to write.
 337          *
 338          * Return:
 339          *  CYRET_SUCCESS, if the operation was successful.
 340          *  CYRET_BAD_PARAM, if the parameter rowNumber is out of range.
 341          *  CYRET_LOCKED, if the SPC is being used.
 342          *  CYRET_UNKNOWN, if there was an SPC error.
 343          *
 344          *******************************************************************************/
 345          cystatus EEPROM_Write(const uint8 * rowData, uint8 rowNumber) 
 346          {
 347   1          cystatus status;
 348   1          
 349   1          CySpcStart();
 350   1      
 351   1          if(rowNumber < (uint8) CY_EEPROM_NUMBER_ROWS)
 352   1          {
 353   2              /* See if we can get SPC. */
 354   2              if(CySpcLock() == CYRET_SUCCESS)
 355   2              {
 356   3                  /* Plan for failure */
 357   3                  status = CYRET_UNKNOWN;
 358   3      
 359   3                  /* Command to load a row of data */
 360   3                  if(CySpcLoadRow(CY_SPC_FIRST_EE_ARRAYID, rowData, CYDEV_EEPROM_ROW_SIZE) == CYRET_STARTED)
 361   3                  {
 362   4                      while(CY_SPC_BUSY)
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 7   

 363   4                      {
 364   5                          /* Wait until SPC becomes idle */
 365   5                      }
 366   4      
 367   4                      /* SPC is idle now */
 368   4                      if(CY_SPC_STATUS_SUCCESS == CY_SPC_READ_STATUS)
 369   4                      {
 370   5                          status = CYRET_SUCCESS;
 371   5                      }
 372   4      
 373   4                      /* Command to erase and program the row. */
 374   4                      if(status == CYRET_SUCCESS)
 375   4                      {
 376   5                          if(CySpcWriteRow(CY_SPC_FIRST_EE_ARRAYID, (uint16)rowNumber, dieTemperature[0u],
 377   5                          dieTemperature[1u]) == CYRET_STARTED)
 378   5                          {
 379   6                              /* Plan for failure */
 380   6                              status = CYRET_UNKNOWN;
 381   6      
 382   6                              while(CY_SPC_BUSY)
 383   6                              {
 384   7                                  /* Wait until SPC becomes idle */
 385   7                              }
 386   6      
 387   6                              /* SPC is idle now */
 388   6                              if(CY_SPC_STATUS_SUCCESS == CY_SPC_READ_STATUS)
 389   6                              {
 390   7                                  status = CYRET_SUCCESS;
 391   7                              }
 392   6                          }
 393   5                          else
 394   5                          {
 395   6                              status = CYRET_UNKNOWN;
 396   6                          }
 397   5                      }
 398   4                      else
 399   4                      {
 400   5                          status = CYRET_UNKNOWN;
 401   5                      }
 402   4                  }
 403   3      
 404   3                  /* Unlock SPC so that someone else can use it. */
 405   3                  CySpcUnlock();
 406   3              }
 407   2              else
 408   2              {
 409   3                  status = CYRET_LOCKED;
 410   3              }
 411   2          }
 412   1          else
 413   1          {
 414   2              status = CYRET_BAD_PARAM;
 415   2          }
 416   1      
 417   1          return(status);
 418   1      }
 419          
 420          
 421          /*******************************************************************************
 422          * Function Name: EEPROM_StartWrite
 423          ********************************************************************************
 424          *
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 8   

 425          * Summary:
 426          *  Starts a write of a row (16 bytes) of data to the EEPROM.
 427          *  This function does not block. The function returns once the SPC has begun
 428          *  writing the data. This function must be used in combination with
 429          *  EEPROM_Query(). EEPROM_Query() must be called
 430          *  until it returns a status other than CYRET_STARTED. That indicates that the
 431          *  write has completed. Until EEPROM_Query() detects that
 432          *  the write is complete, the SPC is marked as locked to prevent another
 433          *  SPC operation from being performed. For a reliable write procedure to occur
 434          *  you should call EEPROM_UpdateTemperature() API if the temperature
 435          *  of the silicon has changed for more than 10C since component was started.
 436          *
 437          * Parameters:
 438          *  rowData:    The address of the data to write to the EEPROM.
 439          *  rowNumber:  The row number to write.
 440          *
 441          * Return:
 442          *  CYRET_STARTED, if the SPC command to write was successfully started.
 443          *  CYRET_BAD_PARAM, if the parameter rowNumber is out of range.
 444          *  CYRET_LOCKED, if the SPC is being used.
 445          *  CYRET_UNKNOWN, if there was an SPC error.
 446          *
 447          * Side effects:
 448          *  After calling this API, the device should not be powered down, reset or switched
 449          *  to low power modes until EEPROM operation is complete. 
 450          *  Ignoring this recommendation may lead to data corruption or silicon
 451          *  unexpected behavior.
 452          *
 453          *******************************************************************************/
 454          cystatus EEPROM_StartWrite(const uint8 * rowData, uint8 rowNumber) \
 455          
 456          {
 457   1          cystatus status;
 458   1          
 459   1          CySpcStart();
 460   1      
 461   1          if(rowNumber < (uint8) CY_EEPROM_NUMBER_ROWS)
 462   1          {
 463   2              /* See if we can get SPC. */
 464   2              if(CySpcLock() == CYRET_SUCCESS)
 465   2              {
 466   3                  /* Plan for failure */
 467   3                  status = CYRET_UNKNOWN;
 468   3      
 469   3                  /* Command to load a row of data */
 470   3                  if(CySpcLoadRow(CY_SPC_FIRST_EE_ARRAYID, rowData, CYDEV_EEPROM_ROW_SIZE) == CYRET_STARTED)
 471   3                  {
 472   4                      while(CY_SPC_BUSY)
 473   4                      {
 474   5                          /* Wait until SPC becomes idle */
 475   5                      }
 476   4      
 477   4                      /* SPC is idle now */
 478   4                      if(CY_SPC_STATUS_SUCCESS == CY_SPC_READ_STATUS)
 479   4                      {
 480   5                          status = CYRET_SUCCESS;
 481   5                      }
 482   4      
 483   4                      /* Command to erase and program the row. */
 484   4                      if(status == CYRET_SUCCESS)
 485   4                      {
 486   5                          if(CySpcWriteRow(CY_SPC_FIRST_EE_ARRAYID, (uint16)rowNumber, dieTemperature[0u],
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 9   

 487   5                          dieTemperature[1u]) == CYRET_STARTED)
 488   5                          {
 489   6                              status = CYRET_STARTED;
 490   6                          }
 491   5                          else
 492   5                          {
 493   6                              status = CYRET_UNKNOWN;
 494   6                          }
 495   5                      }
 496   4                      else
 497   4                      {
 498   5                          status = CYRET_UNKNOWN;
 499   5                      }
 500   4                  }
 501   3              }
 502   2              else
 503   2              {
 504   3                  status = CYRET_LOCKED;
 505   3              }
 506   2          }
 507   1          else
 508   1          {
 509   2              status = CYRET_BAD_PARAM;
 510   2          }
 511   1      
 512   1          return(status);
 513   1      }
 514          
 515          
 516          /*******************************************************************************
 517          * Function Name: EEPROM_StartErase
 518          ********************************************************************************
 519          *
 520          * Summary:
 521          *  Starts the EEPROM sector erase. This function does not block.
 522          *  The function returns once the SPC has begun writing the data. This function
 523          *  must be used in combination with EEPROM_Query().
 524          *  EEPROM_Query() must be called until it returns a status
 525          *  other than CYRET_STARTED. That indicates the erase has been completed.
 526          *  Until EEPROM_Query() detects that the erase is
 527          *  complete, the SPC is marked as locked to prevent another SPC operation
 528          *  from being performed.
 529          *
 530          * Parameters:
 531          *  sectorNumber:  The sector number to erase.
 532          *
 533          * Return:
 534          *  CYRET_STARTED, if the SPC command to erase was successfully started.
 535          *  CYRET_BAD_PARAM, if the parameter sectorNumber is out of range.
 536          *  CYRET_LOCKED, if the SPC is being used.
 537          *  CYRET_UNKNOWN, if there was an SPC error.
 538          *
 539          * Side effects:
 540          *  After calling this API, the device should not be powered down, reset or switched
 541          *  to low power modes until EEPROM operation is complete.
 542          *  Ignoring this recommendation may lead to data corruption or silicon
 543          *  unexpected behavior.
 544          *
 545          *******************************************************************************/
 546          cystatus EEPROM_StartErase(uint8 sectorNumber) 
 547          {
 548   1          cystatus status;
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 10  

 549   1          
 550   1          CySpcStart();
 551   1      
 552   1          if(sectorNumber < (uint8) CY_EEPROM_NUMBER_ARRAYS)
 553   1          {
 554   2              /* See if we can get SPC. */
 555   2              if(CySpcLock() == CYRET_SUCCESS)
 556   2              {
 557   3                  /* Plan for failure */
 558   3                  status = CYRET_UNKNOWN;
 559   3      
 560   3                  /* Command to load a row of data */
 561   3                  if(CySpcEraseSector(CY_SPC_FIRST_EE_ARRAYID, sectorNumber) == CYRET_STARTED)
 562   3                  {
 563   4                      status = CYRET_SUCCESS;
 564   4                  }
 565   3              }
 566   2              else
 567   2              {
 568   3                  status = CYRET_LOCKED;
 569   3              }
 570   2          }
 571   1          else
 572   1          {
 573   2              status = CYRET_BAD_PARAM;
 574   2          }
 575   1      
 576   1          return(status);
 577   1      }
 578          
 579          
 580          /*******************************************************************************
 581          * Function Name: EEPROM_Query
 582          ********************************************************************************
 583          *
 584          * Summary:
 585          *  Checks the status of an earlier call to EEPROM_StartWrite() or
 586          *  EEPROM_StartErase().
 587          *  This function must be called until it returns a value other than
 588          *  CYRET_STARTED. Once that occurs, the write or erase has been completed and
 589          *  the SPC is unlocked.
 590          *
 591          * Parameters:
 592          *  None
 593          *
 594          * Return:
 595          *  CYRET_STARTED, if the SPC command is still processing.
 596          *  CYRET_SUCCESS, if the operation was completed successfully.
 597          *  CYRET_UNKNOWN, if there was an SPC error.
 598          *
 599          *******************************************************************************/
 600          cystatus EEPROM_Query(void) 
 601          {
 602   1          cystatus status;
 603   1          
 604   1          CySpcStart();
 605   1      
 606   1          /* Check if SPC is idle */
 607   1          if(CY_SPC_IDLE)
 608   1          {
 609   2              /* SPC is idle now */
 610   2              if(CY_SPC_STATUS_SUCCESS == CY_SPC_READ_STATUS)
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 11  

 611   2              {
 612   3                  status = CYRET_SUCCESS;
 613   3              }
 614   2              else
 615   2              {
 616   3                  status = CYRET_UNKNOWN;
 617   3              }
 618   2      
 619   2              /* Unlock SPC so that someone else can use it. */
 620   2              CySpcUnlock();
 621   2          }
 622   1          else
 623   1          {
 624   2              status = CYRET_STARTED;
 625   2          }
 626   1      
 627   1          return(status);
 628   1      }
 629          
 630          
 631          /*******************************************************************************
 632          * Function Name: EEPROM_ByteWritePos
 633          ********************************************************************************
 634          *
 635          * Summary:
 636          *  Writes a byte of data to the EEPROM. This is a blocking call. It will not
 637          *  return until the write operation succeeds or fails.
 638          *
 639          * Parameters:
 640          *  dataByte:   The byte of data to write to the EEPROM.
 641          *  rowNumber:  The EEPROM row number to program.
 642          *  byteNumber: The byte number within the row to program.
 643          *
 644          * Return:
 645          *  CYRET_SUCCESS, if the operation was successful.
 646          *  CYRET_BAD_PARAM, if the parameter rowNumber or byteNumber is out of range.
 647          *  CYRET_LOCKED, if the SPC is being used.
 648          *  CYRET_UNKNOWN, if there was an SPC error.
 649          *
 650          *******************************************************************************/
 651          cystatus EEPROM_ByteWritePos(uint8 dataByte, uint8 rowNumber, uint8 byteNumber) \
 652          
 653          {
 654   1          cystatus status;
 655   1      
 656   1          /* Start SPC */
 657   1          CySpcStart();
 658   1      
 659   1          if((rowNumber < (uint8) CY_EEPROM_NUMBER_ROWS) && (byteNumber < (uint8) SIZEOF_EEPROM_ROW))
 660   1          {
 661   2              /* See if we can get SPC. */
 662   2              if(CySpcLock() == CYRET_SUCCESS)
 663   2              {
 664   3                  /* Plan for failure */
 665   3                  status = CYRET_UNKNOWN;
 666   3      
 667   3                  /* Command to load byte of data */
 668   3                  if(CySpcLoadMultiByte(CY_SPC_FIRST_EE_ARRAYID, (uint16)byteNumber, &dataByte,\
 669   3                                                                      EEPROM_SPC_BYTE_WRITE_SIZE) == CYRET_START
             -ED)
 670   3                  {
 671   4                      while(CY_SPC_BUSY)
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 12  

 672   4                      {
 673   5                          /* Wait until SPC becomes idle */
 674   5                      }
 675   4      
 676   4                      /* SPC is idle now */
 677   4                      if(CY_SPC_STATUS_SUCCESS == CY_SPC_READ_STATUS)
 678   4                      {
 679   5                          status = CYRET_SUCCESS;
 680   5                      }
 681   4      
 682   4                      /* Command to erase and program the row. */
 683   4                      if(status == CYRET_SUCCESS)
 684   4                      {
 685   5                          if(CySpcWriteRow(CY_SPC_FIRST_EE_ARRAYID, (uint16)rowNumber, dieTemperature[0u],
 686   5                          dieTemperature[1u]) == CYRET_STARTED)
 687   5                          {
 688   6                              /* Plan for failure */
 689   6                              status = CYRET_UNKNOWN;
 690   6      
 691   6                              while(CY_SPC_BUSY)
 692   6                              {
 693   7                                  /* Wait until SPC becomes idle */
 694   7                              }
 695   6      
 696   6                              /* SPC is idle now */
 697   6                              if(CY_SPC_STATUS_SUCCESS == CY_SPC_READ_STATUS)
 698   6                              {
 699   7                                  status = CYRET_SUCCESS;
 700   7                              }
 701   6                          }
 702   5                          else
 703   5                          {
 704   6                              status = CYRET_UNKNOWN;
 705   6                          }
 706   5                      }
 707   4                      else
 708   4                      {
 709   5                          status = CYRET_UNKNOWN;
 710   5                      }
 711   4                  }
 712   3      
 713   3                  /* Unlock SPC so that someone else can use it. */
 714   3                  CySpcUnlock();
 715   3              }
 716   2              else
 717   2              {
 718   3                  status = CYRET_LOCKED;
 719   3              }
 720   2          }
 721   1          else
 722   1          {
 723   2              status = CYRET_BAD_PARAM;
 724   2          }
 725   1      
 726   1          return(status);
 727   1      }
 728          
 729          
 730          /* [] END OF FILE */
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 13  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION EEPROM_Enable (BEGIN)
                                           ; SOURCE LINE # 33
                                           ; SOURCE LINE # 34
                                           ; SOURCE LINE # 36
0000 120000      E     LCALL   CySetTemp
                                           ; SOURCE LINE # 39
0003 120000      E     LCALL   CyEEPROM_Start
                                           ; SOURCE LINE # 40
0006 22                RET     
             ; FUNCTION EEPROM_Enable (END)

             ; FUNCTION EEPROM_Start (BEGIN)
                                           ; SOURCE LINE # 57
                                           ; SOURCE LINE # 58
                                           ; SOURCE LINE # 59
0000 120000      R     LCALL   EEPROM_Enable
                                           ; SOURCE LINE # 60
0003 22                RET     
             ; FUNCTION EEPROM_Start (END)

             ; FUNCTION EEPROM_Stop (BEGIN)
                                           ; SOURCE LINE # 77
                                           ; SOURCE LINE # 78
                                           ; SOURCE LINE # 80
0000 120000      E     LCALL   CyEEPROM_Stop
                                           ; SOURCE LINE # 81
0003 22                RET     
             ; FUNCTION EEPROM_Stop (END)

             ; FUNCTION _EEPROM_WriteByte (BEGIN)
                                           ; SOURCE LINE # 106
0000 900000      R     MOV     DPTR,#dataByte
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EC                MOV     A,R4
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 ED                MOV     A,R5
000A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 107
                                           ; SOURCE LINE # 112
000B 120000      E     LCALL   CySpcStart
                                           ; SOURCE LINE # 114
000E C3                CLR     C
000F 900000      R     MOV     DPTR,#address
0012 E0                MOVX    A,@DPTR
0013 9408              SUBB    A,#08H
0015 4003              JC      $ + 5H
0017 020000      R     LJMP    ?C0004
                                           ; SOURCE LINE # 115
                                           ; SOURCE LINE # 116
001A E0                MOVX    A,@DPTR
001B FC                MOV     R4,A
001C A3                INC     DPTR
001D E0                MOVX    A,@DPTR
001E FD                MOV     R5,A
001F EC                MOV     A,R4
0020 C4                SWAP    A
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 14  

0021 F8                MOV     R0,A
0022 54F0              ANL     A,#0F0H
0024 C8                XCH     A,R0
0025 68                XRL     A,R0
0026 FF                MOV     R7,A
0027 ED                MOV     A,R5
0028 C4                SWAP    A
0029 540F              ANL     A,#0FH
002B 48                ORL     A,R0
002C 900000      R     MOV     DPTR,#rowNumber
002F CF                XCH     A,R7
0030 F0                MOVX    @DPTR,A
0031 A3                INC     DPTR
0032 EF                MOV     A,R7
0033 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 117
0034 E0                MOVX    A,@DPTR
0035 C4                SWAP    A
0036 F8                MOV     R0,A
0037 540F              ANL     A,#0FH
0039 C8                XCH     A,R0
003A 68                XRL     A,R0
003B FF                MOV     R7,A
003C 900000      R     MOV     DPTR,#rowNumber
003F E0                MOVX    A,@DPTR
0040 C4                SWAP    A
0041 54F0              ANL     A,#0F0H
0043 48                ORL     A,R0
0044 FE                MOV     R6,A
0045 C3                CLR     C
0046 ED                MOV     A,R5
0047 9F                SUBB    A,R7
0048 FF                MOV     R7,A
0049 EC                MOV     A,R4
004A 9E                SUBB    A,R6
004B 900000      R     MOV     DPTR,#byteNumber
004E F0                MOVX    @DPTR,A
004F A3                INC     DPTR
0050 EF                MOV     A,R7
0051 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 118
0052 120000      E     LCALL   CySpcLock
0055 EF                MOV     A,R7
0056 6003              JZ      $ + 5H
0058 020000      R     LJMP    ?C0005
                                           ; SOURCE LINE # 119
                                           ; SOURCE LINE # 120
005B 900000      R     MOV     DPTR,#byteNumber
005E E0                MOVX    A,@DPTR
005F FC                MOV     R4,A
0060 A3                INC     DPTR
0061 E0                MOVX    A,@DPTR
0062 FD                MOV     R5,A
0063 7B01              MOV     R3,#01H
0065 7A00        R     MOV     R2,#HIGH dataByte
0067 7900        R     MOV     R1,#LOW dataByte
0069 900000      E     MOV     DPTR,#?_CySpcLoadMultiByte?BYTE+06H
006C 7401              MOV     A,#01H
006E F0                MOVX    @DPTR,A
006F 7F40              MOV     R7,#040H
0071 120000      E     LCALL   _CySpcLoadMultiByte
0074 900000      R     MOV     DPTR,#status
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 15  

0077 EF                MOV     A,R7
0078 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 122
0079 6407              XRL     A,#07H
007B 6003              JZ      $ + 5H
007D 020000      R     LJMP    ?C0006
                                           ; SOURCE LINE # 123
                                           ; SOURCE LINE # 125
0080 74FF              MOV     A,#0FFH
0082 F0                MOVX    @DPTR,A
0083         ?C0007:
                                           ; SOURCE LINE # 127
0083 904722            MOV     DPTR,#04722H
0086 E0                MOVX    A,@DPTR
0087 5402              ANL     A,#02H
0089 60F8              JZ      ?C0007
                                           ; SOURCE LINE # 128
                                           ; SOURCE LINE # 130
008B         ?C0008:
                                           ; SOURCE LINE # 132
008B 904722            MOV     DPTR,#04722H
008E E0                MOVX    A,@DPTR
008F 5402              ANL     A,#02H
0091 6009              JZ      ?C0010
0093 E0                MOVX    A,@DPTR
0094 FF                MOV     R7,A
0095 13                RRC     A
0096 13                RRC     A
0097 543F              ANL     A,#03FH
0099 FF                MOV     R7,A
009A 8002              SJMP    ?C0011
009C         ?C0010:
009C 7FFF              MOV     R7,#0FFH
009E         ?C0011:
009E EF                MOV     A,R7
009F 7004              JNZ     ?C0009
                                           ; SOURCE LINE # 133
                                           ; SOURCE LINE # 134
00A1 900000      R     MOV     DPTR,#status
00A4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 135
00A5         ?C0009:
                                           ; SOURCE LINE # 137
00A5 900000      R     MOV     DPTR,#status
00A8 E0                MOVX    A,@DPTR
00A9 704D              JNZ     ?C0012
                                           ; SOURCE LINE # 138
                                           ; SOURCE LINE # 139
00AB A3                INC     DPTR
00AC E0                MOVX    A,@DPTR
00AD FC                MOV     R4,A
00AE A3                INC     DPTR
00AF E0                MOVX    A,@DPTR
00B0 FD                MOV     R5,A
00B1 900000      E     MOV     DPTR,#dieTemperature
00B4 E0                MOVX    A,@DPTR
00B5 FB                MOV     R3,A
00B6 A3                INC     DPTR
00B7 E0                MOVX    A,@DPTR
00B8 900000      E     MOV     DPTR,#?_CySpcWriteRow?BYTE+04H
00BB F0                MOVX    @DPTR,A
00BC 7F40              MOV     R7,#040H
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 16  

00BE 120000      E     LCALL   _CySpcWriteRow
00C1 EF                MOV     A,R7
00C2 6407              XRL     A,#07H
00C4 702A              JNZ     ?C0013
                                           ; SOURCE LINE # 141
                                           ; SOURCE LINE # 143
00C6 900000      R     MOV     DPTR,#status
00C9 74FF              MOV     A,#0FFH
00CB F0                MOVX    @DPTR,A
00CC         ?C0014:
                                           ; SOURCE LINE # 145
00CC 904722            MOV     DPTR,#04722H
00CF E0                MOVX    A,@DPTR
00D0 5402              ANL     A,#02H
00D2 60F8              JZ      ?C0014
                                           ; SOURCE LINE # 146
                                           ; SOURCE LINE # 148
00D4         ?C0015:
                                           ; SOURCE LINE # 151
00D4 904722            MOV     DPTR,#04722H
00D7 E0                MOVX    A,@DPTR
00D8 5402              ANL     A,#02H
00DA 6009              JZ      ?C0017
00DC E0                MOVX    A,@DPTR
00DD FF                MOV     R7,A
00DE 13                RRC     A
00DF 13                RRC     A
00E0 543F              ANL     A,#03FH
00E2 FF                MOV     R7,A
00E3 8002              SJMP    ?C0018
00E5         ?C0017:
00E5 7FFF              MOV     R7,#0FFH
00E7         ?C0018:
00E7 EF                MOV     A,R7
00E8 7021              JNZ     ?C0021
                                           ; SOURCE LINE # 152
                                           ; SOURCE LINE # 153
00EA 900000      R     MOV     DPTR,#status
00ED F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 154
                                           ; SOURCE LINE # 155
00EE 801B              SJMP    ?C0021
00F0         ?C0013:
                                           ; SOURCE LINE # 157
                                           ; SOURCE LINE # 158
00F0 900000      R     MOV     DPTR,#status
00F3 74FF              MOV     A,#0FFH
00F5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 159
                                           ; SOURCE LINE # 160
00F6 8013              SJMP    ?C0021
00F8         ?C0012:
                                           ; SOURCE LINE # 162
                                           ; SOURCE LINE # 163
00F8 900000      R     MOV     DPTR,#status
00FB 74FF              MOV     A,#0FFH
00FD F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 164
                                           ; SOURCE LINE # 165
00FE 800B              SJMP    ?C0021
0100         ?C0006:
                                           ; SOURCE LINE # 167
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 17  

                                           ; SOURCE LINE # 168
0100 900000      R     MOV     DPTR,#status
0103 E0                MOVX    A,@DPTR
0104 6401              XRL     A,#01H
0106 6003              JZ      ?C0021
                                           ; SOURCE LINE # 169
                                           ; SOURCE LINE # 170
0108 74FF              MOV     A,#0FFH
010A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 171
                                           ; SOURCE LINE # 172
010B         ?C0021:
                                           ; SOURCE LINE # 173
010B 120000      E     LCALL   CySpcUnlock
                                           ; SOURCE LINE # 174
010E 800E              SJMP    ?C0024
0110         ?C0005:
                                           ; SOURCE LINE # 176
                                           ; SOURCE LINE # 177
0110 900000      R     MOV     DPTR,#status
0113 7404              MOV     A,#04H
0115 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 178
                                           ; SOURCE LINE # 179
0116 8006              SJMP    ?C0024
0118         ?C0004:
                                           ; SOURCE LINE # 181
                                           ; SOURCE LINE # 182
0118 900000      R     MOV     DPTR,#status
011B 7401              MOV     A,#01H
011D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 183
011E         ?C0024:
                                           ; SOURCE LINE # 186
011E 900000      R     MOV     DPTR,#status
0121 E0                MOVX    A,@DPTR
0122 FF                MOV     R7,A
                                           ; SOURCE LINE # 187
0123         ?C0025:
0123 22                RET     
             ; FUNCTION _EEPROM_WriteByte (END)

             ; FUNCTION _EEPROM_ReadByte (BEGIN)
                                           ; SOURCE LINE # 208
0000 900000      R     MOV     DPTR,#address
0003 EE                MOV     A,R6
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EF                MOV     A,R7
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 209
                                           ; SOURCE LINE # 213
0008 120000      E     LCALL   CyEnterCriticalSection
000B 900000      R     MOV     DPTR,#interruptState
000E EF                MOV     A,R7
000F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 217
0010 120000      E     LCALL   CyEEPROM_ReadReserve
                                           ; SOURCE LINE # 219
0013 900000      R     MOV     DPTR,#address+01H
0016 E0                MOVX    A,@DPTR
0017 2400              ADD     A,#00H
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 18  

0019 FF                MOV     R7,A
001A 900000      R     MOV     DPTR,#address
001D E0                MOVX    A,@DPTR
001E 3480              ADDC    A,#080H
0020 8F82              MOV     DPL,R7
0022 F583              MOV     DPH,A
0024 E0                MOVX    A,@DPTR
0025 900000      R     MOV     DPTR,#retByte
0028 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 222
0029 120000      E     LCALL   CyEEPROM_ReadRelease
                                           ; SOURCE LINE # 224
002C 900000      R     MOV     DPTR,#interruptState
002F E0                MOVX    A,@DPTR
0030 FF                MOV     R7,A
0031 120000      E     LCALL   _CyExitCriticalSection
                                           ; SOURCE LINE # 226
0034 900000      R     MOV     DPTR,#retByte
0037 E0                MOVX    A,@DPTR
0038 FF                MOV     R7,A
                                           ; SOURCE LINE # 227
0039         ?C0026:
0039 22                RET     
             ; FUNCTION _EEPROM_ReadByte (END)

             ; FUNCTION EEPROM_UpdateTemperature (BEGIN)
                                           ; SOURCE LINE # 247
                                           ; SOURCE LINE # 248
                                           ; SOURCE LINE # 249
0000 120000      E     LCALL   CySetTemp
                                           ; SOURCE LINE # 250
0003         ?C0027:
0003 22                RET     
             ; FUNCTION EEPROM_UpdateTemperature (END)

             ; FUNCTION _EEPROM_EraseSector (BEGIN)
                                           ; SOURCE LINE # 273
0000 900000      R     MOV     DPTR,#sectorNumber
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 274
                                           ; SOURCE LINE # 277
0005 120000      E     LCALL   CySpcStart
                                           ; SOURCE LINE # 279
0008 900000      R     MOV     DPTR,#sectorNumber
000B E0                MOVX    A,@DPTR
000C C3                CLR     C
000D 9402              SUBB    A,#02H
000F 5052              JNC     ?C0028
                                           ; SOURCE LINE # 280
                                           ; SOURCE LINE # 282
0011 120000      E     LCALL   CySpcLock
0014 EF                MOV     A,R7
0015 7044              JNZ     ?C0029
                                           ; SOURCE LINE # 283
                                           ; SOURCE LINE # 284
0017 900000      R     MOV     DPTR,#sectorNumber
001A E0                MOVX    A,@DPTR
001B FD                MOV     R5,A
001C 7F40              MOV     R7,#040H
001E 120000      E     LCALL   _CySpcEraseSector
0021 EF                MOV     A,R7
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 19  

0022 6407              XRL     A,#07H
0024 702A              JNZ     ?C0030
                                           ; SOURCE LINE # 285
                                           ; SOURCE LINE # 287
0026 900000      R     MOV     DPTR,#status
0029 74FF              MOV     A,#0FFH
002B F0                MOVX    @DPTR,A
002C         ?C0031:
                                           ; SOURCE LINE # 289
002C 904722            MOV     DPTR,#04722H
002F E0                MOVX    A,@DPTR
0030 5402              ANL     A,#02H
0032 60F8              JZ      ?C0031
                                           ; SOURCE LINE # 290
                                           ; SOURCE LINE # 292
0034         ?C0032:
                                           ; SOURCE LINE # 295
0034 904722            MOV     DPTR,#04722H
0037 E0                MOVX    A,@DPTR
0038 5402              ANL     A,#02H
003A 6009              JZ      ?C0034
003C E0                MOVX    A,@DPTR
003D FF                MOV     R7,A
003E 13                RRC     A
003F 13                RRC     A
0040 543F              ANL     A,#03FH
0042 FF                MOV     R7,A
0043 8002              SJMP    ?C0035
0045         ?C0034:
0045 7FFF              MOV     R7,#0FFH
0047         ?C0035:
0047 EF                MOV     A,R7
0048 700C              JNZ     ?C0036
                                           ; SOURCE LINE # 296
                                           ; SOURCE LINE # 297
004A 900000      R     MOV     DPTR,#status
004D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 298
                                           ; SOURCE LINE # 299
004E 8006              SJMP    ?C0036
0050         ?C0030:
                                           ; SOURCE LINE # 301
                                           ; SOURCE LINE # 302
0050 900000      R     MOV     DPTR,#status
0053 74FF              MOV     A,#0FFH
0055 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 303
0056         ?C0036:
                                           ; SOURCE LINE # 306
0056 120000      E     LCALL   CySpcUnlock
                                           ; SOURCE LINE # 307
0059 800E              SJMP    ?C0038
005B         ?C0029:
                                           ; SOURCE LINE # 309
                                           ; SOURCE LINE # 310
005B 900000      R     MOV     DPTR,#status
005E 7404              MOV     A,#04H
0060 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 311
                                           ; SOURCE LINE # 312
0061 8006              SJMP    ?C0038
0063         ?C0028:
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 20  

                                           ; SOURCE LINE # 314
                                           ; SOURCE LINE # 315
0063 900000      R     MOV     DPTR,#status
0066 7401              MOV     A,#01H
0068 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 316
0069         ?C0038:
                                           ; SOURCE LINE # 318
0069 900000      R     MOV     DPTR,#status
006C E0                MOVX    A,@DPTR
006D FF                MOV     R7,A
                                           ; SOURCE LINE # 319
006E         ?C0039:
006E 22                RET     
             ; FUNCTION _EEPROM_EraseSector (END)

             ; FUNCTION _EEPROM_Write (BEGIN)
                                           ; SOURCE LINE # 345
0000 900000      R     MOV     DPTR,#rowData
0003 EB                MOV     A,R3
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EA                MOV     A,R2
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 E9                MOV     A,R1
000A F0                MOVX    @DPTR,A
000B A3                INC     DPTR
000C ED                MOV     A,R5
000D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 346
                                           ; SOURCE LINE # 349
000E 120000      E     LCALL   CySpcStart
                                           ; SOURCE LINE # 351
0011 900000      R     MOV     DPTR,#rowNumber
0014 E0                MOVX    A,@DPTR
0015 C3                CLR     C
0016 9480              SUBB    A,#080H
0018 4003              JC      $ + 5H
001A 020000      R     LJMP    ?C0040
                                           ; SOURCE LINE # 352
                                           ; SOURCE LINE # 354
001D 120000      E     LCALL   CySpcLock
0020 EF                MOV     A,R7
0021 6003              JZ      $ + 5H
0023 020000      R     LJMP    ?C0041
                                           ; SOURCE LINE # 355
                                           ; SOURCE LINE # 357
0026 900000      R     MOV     DPTR,#status
0029 74FF              MOV     A,#0FFH
002B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 360
002C 900000      R     MOV     DPTR,#rowData
002F E0                MOVX    A,@DPTR
0030 FB                MOV     R3,A
0031 A3                INC     DPTR
0032 E0                MOVX    A,@DPTR
0033 FA                MOV     R2,A
0034 A3                INC     DPTR
0035 E0                MOVX    A,@DPTR
0036 F9                MOV     R1,A
0037 900000      E     MOV     DPTR,#?_CySpcLoadRow?BYTE+04H
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 21  

003A E4                CLR     A
003B F0                MOVX    @DPTR,A
003C A3                INC     DPTR
003D 7410              MOV     A,#010H
003F F0                MOVX    @DPTR,A
0040 7F40              MOV     R7,#040H
0042 120000      E     LCALL   _CySpcLoadRow
0045 EF                MOV     A,R7
0046 6407              XRL     A,#07H
0048 707C              JNZ     ?C0042
                                           ; SOURCE LINE # 361
004A         ?C0043:
                                           ; SOURCE LINE # 362
004A 904722            MOV     DPTR,#04722H
004D E0                MOVX    A,@DPTR
004E 5402              ANL     A,#02H
0050 60F8              JZ      ?C0043
                                           ; SOURCE LINE # 363
                                           ; SOURCE LINE # 365
0052         ?C0044:
                                           ; SOURCE LINE # 368
0052 904722            MOV     DPTR,#04722H
0055 E0                MOVX    A,@DPTR
0056 5402              ANL     A,#02H
0058 6009              JZ      ?C0046
005A E0                MOVX    A,@DPTR
005B FF                MOV     R7,A
005C 13                RRC     A
005D 13                RRC     A
005E 543F              ANL     A,#03FH
0060 FF                MOV     R7,A
0061 8002              SJMP    ?C0047
0063         ?C0046:
0063 7FFF              MOV     R7,#0FFH
0065         ?C0047:
0065 EF                MOV     A,R7
0066 7004              JNZ     ?C0045
                                           ; SOURCE LINE # 369
                                           ; SOURCE LINE # 370
0068 900000      R     MOV     DPTR,#status
006B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 371
006C         ?C0045:
                                           ; SOURCE LINE # 374
006C 900000      R     MOV     DPTR,#status
006F E0                MOVX    A,@DPTR
0070 704E              JNZ     ?C0048
                                           ; SOURCE LINE # 375
                                           ; SOURCE LINE # 376
0072 900000      R     MOV     DPTR,#rowNumber
0075 E0                MOVX    A,@DPTR
0076 FD                MOV     R5,A
0077 7C00              MOV     R4,#00H
0079 900000      E     MOV     DPTR,#dieTemperature
007C E0                MOVX    A,@DPTR
007D FB                MOV     R3,A
007E A3                INC     DPTR
007F E0                MOVX    A,@DPTR
0080 900000      E     MOV     DPTR,#?_CySpcWriteRow?BYTE+04H
0083 F0                MOVX    @DPTR,A
0084 7F40              MOV     R7,#040H
0086 120000      E     LCALL   _CySpcWriteRow
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 22  

0089 EF                MOV     A,R7
008A 6407              XRL     A,#07H
008C 702A              JNZ     ?C0049
                                           ; SOURCE LINE # 378
                                           ; SOURCE LINE # 380
008E 900000      R     MOV     DPTR,#status
0091 74FF              MOV     A,#0FFH
0093 F0                MOVX    @DPTR,A
0094         ?C0050:
                                           ; SOURCE LINE # 382
0094 904722            MOV     DPTR,#04722H
0097 E0                MOVX    A,@DPTR
0098 5402              ANL     A,#02H
009A 60F8              JZ      ?C0050
                                           ; SOURCE LINE # 383
                                           ; SOURCE LINE # 385
009C         ?C0051:
                                           ; SOURCE LINE # 388
009C 904722            MOV     DPTR,#04722H
009F E0                MOVX    A,@DPTR
00A0 5402              ANL     A,#02H
00A2 6009              JZ      ?C0053
00A4 E0                MOVX    A,@DPTR
00A5 FF                MOV     R7,A
00A6 13                RRC     A
00A7 13                RRC     A
00A8 543F              ANL     A,#03FH
00AA FF                MOV     R7,A
00AB 8002              SJMP    ?C0054
00AD         ?C0053:
00AD 7FFF              MOV     R7,#0FFH
00AF         ?C0054:
00AF EF                MOV     A,R7
00B0 7014              JNZ     ?C0042
                                           ; SOURCE LINE # 389
                                           ; SOURCE LINE # 390
00B2 900000      R     MOV     DPTR,#status
00B5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 391
                                           ; SOURCE LINE # 392
00B6 800E              SJMP    ?C0042
00B8         ?C0049:
                                           ; SOURCE LINE # 394
                                           ; SOURCE LINE # 395
00B8 900000      R     MOV     DPTR,#status
00BB 74FF              MOV     A,#0FFH
00BD F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 396
                                           ; SOURCE LINE # 397
00BE 8006              SJMP    ?C0042
00C0         ?C0048:
                                           ; SOURCE LINE # 399
                                           ; SOURCE LINE # 400
00C0 900000      R     MOV     DPTR,#status
00C3 74FF              MOV     A,#0FFH
00C5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 401
                                           ; SOURCE LINE # 402
00C6         ?C0042:
                                           ; SOURCE LINE # 405
00C6 120000      E     LCALL   CySpcUnlock
                                           ; SOURCE LINE # 406
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 23  

00C9 800E              SJMP    ?C0058
00CB         ?C0041:
                                           ; SOURCE LINE # 408
                                           ; SOURCE LINE # 409
00CB 900000      R     MOV     DPTR,#status
00CE 7404              MOV     A,#04H
00D0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 410
                                           ; SOURCE LINE # 411
00D1 8006              SJMP    ?C0058
00D3         ?C0040:
                                           ; SOURCE LINE # 413
                                           ; SOURCE LINE # 414
00D3 900000      R     MOV     DPTR,#status
00D6 7401              MOV     A,#01H
00D8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 415
00D9         ?C0058:
                                           ; SOURCE LINE # 417
00D9 900000      R     MOV     DPTR,#status
00DC E0                MOVX    A,@DPTR
00DD FF                MOV     R7,A
                                           ; SOURCE LINE # 418
00DE         ?C0059:
00DE 22                RET     
             ; FUNCTION _EEPROM_Write (END)

             ; FUNCTION _EEPROM_StartWrite (BEGIN)
                                           ; SOURCE LINE # 454
0000 900000      R     MOV     DPTR,#rowData
0003 EB                MOV     A,R3
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EA                MOV     A,R2
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 E9                MOV     A,R1
000A F0                MOVX    @DPTR,A
000B A3                INC     DPTR
000C ED                MOV     A,R5
000D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 456
                                           ; SOURCE LINE # 459
000E 120000      E     LCALL   CySpcStart
                                           ; SOURCE LINE # 461
0011 900000      R     MOV     DPTR,#rowNumber
0014 E0                MOVX    A,@DPTR
0015 C3                CLR     C
0016 9480              SUBB    A,#080H
0018 4003              JC      $ + 5H
001A 020000      R     LJMP    ?C0060
                                           ; SOURCE LINE # 462
                                           ; SOURCE LINE # 464
001D 120000      E     LCALL   CySpcLock
0020 EF                MOV     A,R7
0021 6003              JZ      $ + 5H
0023 020000      R     LJMP    ?C0061
                                           ; SOURCE LINE # 465
                                           ; SOURCE LINE # 467
0026 900000      R     MOV     DPTR,#status
0029 74FF              MOV     A,#0FFH
002B F0                MOVX    @DPTR,A
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 24  

                                           ; SOURCE LINE # 470
002C 900000      R     MOV     DPTR,#rowData
002F E0                MOVX    A,@DPTR
0030 FB                MOV     R3,A
0031 A3                INC     DPTR
0032 E0                MOVX    A,@DPTR
0033 FA                MOV     R2,A
0034 A3                INC     DPTR
0035 E0                MOVX    A,@DPTR
0036 F9                MOV     R1,A
0037 900000      E     MOV     DPTR,#?_CySpcLoadRow?BYTE+04H
003A E4                CLR     A
003B F0                MOVX    @DPTR,A
003C A3                INC     DPTR
003D 7410              MOV     A,#010H
003F F0                MOVX    @DPTR,A
0040 7F40              MOV     R7,#040H
0042 120000      E     LCALL   _CySpcLoadRow
0045 EF                MOV     A,R7
0046 6407              XRL     A,#07H
0048 7069              JNZ     ?C0073
                                           ; SOURCE LINE # 471
004A         ?C0063:
                                           ; SOURCE LINE # 472
004A 904722            MOV     DPTR,#04722H
004D E0                MOVX    A,@DPTR
004E 5402              ANL     A,#02H
0050 60F8              JZ      ?C0063
                                           ; SOURCE LINE # 473
                                           ; SOURCE LINE # 475
0052         ?C0064:
                                           ; SOURCE LINE # 478
0052 904722            MOV     DPTR,#04722H
0055 E0                MOVX    A,@DPTR
0056 5402              ANL     A,#02H
0058 6009              JZ      ?C0066
005A E0                MOVX    A,@DPTR
005B FF                MOV     R7,A
005C 13                RRC     A
005D 13                RRC     A
005E 543F              ANL     A,#03FH
0060 FF                MOV     R7,A
0061 8002              SJMP    ?C0067
0063         ?C0066:
0063 7FFF              MOV     R7,#0FFH
0065         ?C0067:
0065 EF                MOV     A,R7
0066 7004              JNZ     ?C0065
                                           ; SOURCE LINE # 479
                                           ; SOURCE LINE # 480
0068 900000      R     MOV     DPTR,#status
006B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 481
006C         ?C0065:
                                           ; SOURCE LINE # 484
006C 900000      R     MOV     DPTR,#status
006F E0                MOVX    A,@DPTR
0070 702B              JNZ     ?C0068
                                           ; SOURCE LINE # 485
                                           ; SOURCE LINE # 486
0072 900000      R     MOV     DPTR,#rowNumber
0075 E0                MOVX    A,@DPTR
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 25  

0076 FD                MOV     R5,A
0077 7C00              MOV     R4,#00H
0079 900000      E     MOV     DPTR,#dieTemperature
007C E0                MOVX    A,@DPTR
007D FB                MOV     R3,A
007E A3                INC     DPTR
007F E0                MOVX    A,@DPTR
0080 900000      E     MOV     DPTR,#?_CySpcWriteRow?BYTE+04H
0083 F0                MOVX    @DPTR,A
0084 7F40              MOV     R7,#040H
0086 120000      E     LCALL   _CySpcWriteRow
0089 EF                MOV     A,R7
008A B40708            CJNE    A,#07H,?C0069
                                           ; SOURCE LINE # 488
                                           ; SOURCE LINE # 489
008D 900000      R     MOV     DPTR,#status
0090 7407              MOV     A,#07H
0092 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 490
0093 801E              SJMP    ?C0073
0095         ?C0069:
                                           ; SOURCE LINE # 492
                                           ; SOURCE LINE # 493
0095 900000      R     MOV     DPTR,#status
0098 74FF              MOV     A,#0FFH
009A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 494
                                           ; SOURCE LINE # 495
009B 8016              SJMP    ?C0073
009D         ?C0068:
                                           ; SOURCE LINE # 497
                                           ; SOURCE LINE # 498
009D 900000      R     MOV     DPTR,#status
00A0 74FF              MOV     A,#0FFH
00A2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 499
                                           ; SOURCE LINE # 500
                                           ; SOURCE LINE # 501
00A3 800E              SJMP    ?C0073
00A5         ?C0061:
                                           ; SOURCE LINE # 503
                                           ; SOURCE LINE # 504
00A5 900000      R     MOV     DPTR,#status
00A8 7404              MOV     A,#04H
00AA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 505
                                           ; SOURCE LINE # 506
00AB 8006              SJMP    ?C0073
00AD         ?C0060:
                                           ; SOURCE LINE # 508
                                           ; SOURCE LINE # 509
00AD 900000      R     MOV     DPTR,#status
00B0 7401              MOV     A,#01H
00B2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 510
00B3         ?C0073:
                                           ; SOURCE LINE # 512
00B3 900000      R     MOV     DPTR,#status
00B6 E0                MOVX    A,@DPTR
00B7 FF                MOV     R7,A
                                           ; SOURCE LINE # 513
00B8         ?C0074:
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 26  

00B8 22                RET     
             ; FUNCTION _EEPROM_StartWrite (END)

             ; FUNCTION _EEPROM_StartErase (BEGIN)
                                           ; SOURCE LINE # 546
0000 900000      R     MOV     DPTR,#sectorNumber
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 547
                                           ; SOURCE LINE # 550
0005 120000      E     LCALL   CySpcStart
                                           ; SOURCE LINE # 552
0008 900000      R     MOV     DPTR,#sectorNumber
000B E0                MOVX    A,@DPTR
000C C3                CLR     C
000D 9401              SUBB    A,#01H
000F 5029              JNC     ?C0075
                                           ; SOURCE LINE # 553
                                           ; SOURCE LINE # 555
0011 120000      E     LCALL   CySpcLock
0014 EF                MOV     A,R7
0015 701B              JNZ     ?C0076
                                           ; SOURCE LINE # 556
                                           ; SOURCE LINE # 558
0017 900000      R     MOV     DPTR,#status
001A 74FF              MOV     A,#0FFH
001C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 561
001D 900000      R     MOV     DPTR,#sectorNumber
0020 E0                MOVX    A,@DPTR
0021 FD                MOV     R5,A
0022 7F40              MOV     R7,#040H
0024 120000      E     LCALL   _CySpcEraseSector
0027 EF                MOV     A,R7
0028 B40715            CJNE    A,#07H,?C0079
                                           ; SOURCE LINE # 562
                                           ; SOURCE LINE # 563
002B E4                CLR     A
002C 900000      R     MOV     DPTR,#status
002F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 564
                                           ; SOURCE LINE # 565
0030 800E              SJMP    ?C0079
0032         ?C0076:
                                           ; SOURCE LINE # 567
                                           ; SOURCE LINE # 568
0032 900000      R     MOV     DPTR,#status
0035 7404              MOV     A,#04H
0037 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 569
                                           ; SOURCE LINE # 570
0038 8006              SJMP    ?C0079
003A         ?C0075:
                                           ; SOURCE LINE # 572
                                           ; SOURCE LINE # 573
003A 900000      R     MOV     DPTR,#status
003D 7401              MOV     A,#01H
003F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 574
0040         ?C0079:
                                           ; SOURCE LINE # 576
0040 900000      R     MOV     DPTR,#status
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 27  

0043 E0                MOVX    A,@DPTR
0044 FF                MOV     R7,A
                                           ; SOURCE LINE # 577
0045         ?C0080:
0045 22                RET     
             ; FUNCTION _EEPROM_StartErase (END)

             ; FUNCTION EEPROM_Query (BEGIN)
                                           ; SOURCE LINE # 600
                                           ; SOURCE LINE # 601
                                           ; SOURCE LINE # 604
0000 120000      E     LCALL   CySpcStart
                                           ; SOURCE LINE # 607
0003 904722            MOV     DPTR,#04722H
0006 E0                MOVX    A,@DPTR
0007 5402              ANL     A,#02H
0009 6024              JZ      ?C0081
                                           ; SOURCE LINE # 608
                                           ; SOURCE LINE # 610
000B E0                MOVX    A,@DPTR
000C 5402              ANL     A,#02H
000E 6009              JZ      ?C0083
0010 E0                MOVX    A,@DPTR
0011 FF                MOV     R7,A
0012 13                RRC     A
0013 13                RRC     A
0014 543F              ANL     A,#03FH
0016 FF                MOV     R7,A
0017 8002              SJMP    ?C0084
0019         ?C0083:
0019 7FFF              MOV     R7,#0FFH
001B         ?C0084:
001B EF                MOV     A,R7
001C 7006              JNZ     ?C0082
                                           ; SOURCE LINE # 611
                                           ; SOURCE LINE # 612
001E 900000      R     MOV     DPTR,#status
0021 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 613
0022 8006              SJMP    ?C0085
0024         ?C0082:
                                           ; SOURCE LINE # 615
                                           ; SOURCE LINE # 616
0024 900000      R     MOV     DPTR,#status
0027 74FF              MOV     A,#0FFH
0029 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 617
002A         ?C0085:
                                           ; SOURCE LINE # 620
002A 120000      E     LCALL   CySpcUnlock
                                           ; SOURCE LINE # 621
002D 8006              SJMP    ?C0086
002F         ?C0081:
                                           ; SOURCE LINE # 623
                                           ; SOURCE LINE # 624
002F 900000      R     MOV     DPTR,#status
0032 7407              MOV     A,#07H
0034 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 625
0035         ?C0086:
                                           ; SOURCE LINE # 627
0035 900000      R     MOV     DPTR,#status
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 28  

0038 E0                MOVX    A,@DPTR
0039 FF                MOV     R7,A
                                           ; SOURCE LINE # 628
003A         ?C0087:
003A 22                RET     
             ; FUNCTION EEPROM_Query (END)

             ; FUNCTION _EEPROM_ByteWritePos (BEGIN)
                                           ; SOURCE LINE # 651
0000 900000      R     MOV     DPTR,#dataByte
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 ED                MOV     A,R5
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 EB                MOV     A,R3
000A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 653
                                           ; SOURCE LINE # 657
000B 120000      E     LCALL   CySpcStart
                                           ; SOURCE LINE # 659
000E 900000      R     MOV     DPTR,#rowNumber
0011 E0                MOVX    A,@DPTR
0012 C3                CLR     C
0013 9480              SUBB    A,#080H
0015 4003              JC      $ + 5H
0017 020000      R     LJMP    ?C0088
001A A3                INC     DPTR
001B E0                MOVX    A,@DPTR
001C C3                CLR     C
001D 9410              SUBB    A,#010H
001F 4003              JC      $ + 5H
0021 020000      R     LJMP    ?C0088
                                           ; SOURCE LINE # 660
                                           ; SOURCE LINE # 662
0024 120000      E     LCALL   CySpcLock
0027 EF                MOV     A,R7
0028 6003              JZ      $ + 5H
002A 020000      R     LJMP    ?C0089
                                           ; SOURCE LINE # 663
                                           ; SOURCE LINE # 665
002D 900000      R     MOV     DPTR,#status
0030 74FF              MOV     A,#0FFH
0032 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 668
0033 900000      R     MOV     DPTR,#byteNumber
0036 E0                MOVX    A,@DPTR
0037 FD                MOV     R5,A
0038 7C00              MOV     R4,#00H
003A 7B01              MOV     R3,#01H
003C 7A00        R     MOV     R2,#HIGH dataByte
003E 7900        R     MOV     R1,#LOW dataByte
0040 900000      E     MOV     DPTR,#?_CySpcLoadMultiByte?BYTE+06H
0043 7401              MOV     A,#01H
0045 F0                MOVX    @DPTR,A
0046 7F40              MOV     R7,#040H
0048 120000      E     LCALL   _CySpcLoadMultiByte
004B EF                MOV     A,R7
004C 6407              XRL     A,#07H
004E 707C              JNZ     ?C0090
                                           ; SOURCE LINE # 670
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 29  

0050         ?C0091:
                                           ; SOURCE LINE # 671
0050 904722            MOV     DPTR,#04722H
0053 E0                MOVX    A,@DPTR
0054 5402              ANL     A,#02H
0056 60F8              JZ      ?C0091
                                           ; SOURCE LINE # 672
                                           ; SOURCE LINE # 674
0058         ?C0092:
                                           ; SOURCE LINE # 677
0058 904722            MOV     DPTR,#04722H
005B E0                MOVX    A,@DPTR
005C 5402              ANL     A,#02H
005E 6009              JZ      ?C0094
0060 E0                MOVX    A,@DPTR
0061 FF                MOV     R7,A
0062 13                RRC     A
0063 13                RRC     A
0064 543F              ANL     A,#03FH
0066 FF                MOV     R7,A
0067 8002              SJMP    ?C0095
0069         ?C0094:
0069 7FFF              MOV     R7,#0FFH
006B         ?C0095:
006B EF                MOV     A,R7
006C 7004              JNZ     ?C0093
                                           ; SOURCE LINE # 678
                                           ; SOURCE LINE # 679
006E 900000      R     MOV     DPTR,#status
0071 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 680
0072         ?C0093:
                                           ; SOURCE LINE # 683
0072 900000      R     MOV     DPTR,#status
0075 E0                MOVX    A,@DPTR
0076 704E              JNZ     ?C0096
                                           ; SOURCE LINE # 684
                                           ; SOURCE LINE # 685
0078 900000      R     MOV     DPTR,#rowNumber
007B E0                MOVX    A,@DPTR
007C FD                MOV     R5,A
007D 7C00              MOV     R4,#00H
007F 900000      E     MOV     DPTR,#dieTemperature
0082 E0                MOVX    A,@DPTR
0083 FB                MOV     R3,A
0084 A3                INC     DPTR
0085 E0                MOVX    A,@DPTR
0086 900000      E     MOV     DPTR,#?_CySpcWriteRow?BYTE+04H
0089 F0                MOVX    @DPTR,A
008A 7F40              MOV     R7,#040H
008C 120000      E     LCALL   _CySpcWriteRow
008F EF                MOV     A,R7
0090 6407              XRL     A,#07H
0092 702A              JNZ     ?C0097
                                           ; SOURCE LINE # 687
                                           ; SOURCE LINE # 689
0094 900000      R     MOV     DPTR,#status
0097 74FF              MOV     A,#0FFH
0099 F0                MOVX    @DPTR,A
009A         ?C0098:
                                           ; SOURCE LINE # 691
009A 904722            MOV     DPTR,#04722H
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 30  

009D E0                MOVX    A,@DPTR
009E 5402              ANL     A,#02H
00A0 60F8              JZ      ?C0098
                                           ; SOURCE LINE # 692
                                           ; SOURCE LINE # 694
00A2         ?C0099:
                                           ; SOURCE LINE # 697
00A2 904722            MOV     DPTR,#04722H
00A5 E0                MOVX    A,@DPTR
00A6 5402              ANL     A,#02H
00A8 6009              JZ      ?C0101
00AA E0                MOVX    A,@DPTR
00AB FF                MOV     R7,A
00AC 13                RRC     A
00AD 13                RRC     A
00AE 543F              ANL     A,#03FH
00B0 FF                MOV     R7,A
00B1 8002              SJMP    ?C0102
00B3         ?C0101:
00B3 7FFF              MOV     R7,#0FFH
00B5         ?C0102:
00B5 EF                MOV     A,R7
00B6 7014              JNZ     ?C0090
                                           ; SOURCE LINE # 698
                                           ; SOURCE LINE # 699
00B8 900000      R     MOV     DPTR,#status
00BB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 700
                                           ; SOURCE LINE # 701
00BC 800E              SJMP    ?C0090
00BE         ?C0097:
                                           ; SOURCE LINE # 703
                                           ; SOURCE LINE # 704
00BE 900000      R     MOV     DPTR,#status
00C1 74FF              MOV     A,#0FFH
00C3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 705
                                           ; SOURCE LINE # 706
00C4 8006              SJMP    ?C0090
00C6         ?C0096:
                                           ; SOURCE LINE # 708
                                           ; SOURCE LINE # 709
00C6 900000      R     MOV     DPTR,#status
00C9 74FF              MOV     A,#0FFH
00CB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 710
                                           ; SOURCE LINE # 711
00CC         ?C0090:
                                           ; SOURCE LINE # 714
00CC 120000      E     LCALL   CySpcUnlock
                                           ; SOURCE LINE # 715
00CF 800E              SJMP    ?C0106
00D1         ?C0089:
                                           ; SOURCE LINE # 717
                                           ; SOURCE LINE # 718
00D1 900000      R     MOV     DPTR,#status
00D4 7404              MOV     A,#04H
00D6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 719
                                           ; SOURCE LINE # 720
00D7 8006              SJMP    ?C0106
00D9         ?C0088:
C51 COMPILER V9.51   EEPROM                                                                02/07/2017 16:12:15 PAGE 31  

                                           ; SOURCE LINE # 722
                                           ; SOURCE LINE # 723
00D9 900000      R     MOV     DPTR,#status
00DC 7401              MOV     A,#01H
00DE F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 724
00DF         ?C0106:
                                           ; SOURCE LINE # 726
00DF 900000      R     MOV     DPTR,#status
00E2 E0                MOVX    A,@DPTR
00E3 FF                MOV     R7,A
                                           ; SOURCE LINE # 727
00E4         ?C0107:
00E4 22                RET     
             ; FUNCTION _EEPROM_ByteWritePos (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1246    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----      31
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
